# Сравнение производительности сериализации/десериализации json vs protobuf

## Описание экспериментов

Для экспериментов используется JMH Benchmark со следующими настройками:

 - warmup в течение `5` итераций по `3` секунды
 - measurements в течение `10` итераций по `3` секунды
 - `3` fork'а для уменьшения влияния оптимизаций разных запусков на результат

Для воспроизведения эксперимента выполните следующие команды:
```
mvn clean package
java -jar target/benchmark-serialization-1.0-SNAPSHOT.jar
```

## Результаты и выводы

Результат запуска на моей машине (Inter Core i7-1355U):
```
Benchmark                                        Mode  Cnt      Score     Error   Units
SerializationBenchmark.jsonDeserialization      thrpt   30   1957.268 ±  35.924  ops/ms
SerializationBenchmark.jsonSerialization        thrpt   30   3095.293 ±  61.962  ops/ms
SerializationBenchmark.protobufDeserialization  thrpt   30  13390.780 ± 666.728  ops/ms
SerializationBenchmark.protobufSerialization    thrpt   30  18211.638 ± 313.277  ops/ms
```

Как видно, сериализация/десериализация protofub обходит в производительности json в `5-10` раз.

Причины такого результата:
 - Protobuf сериализует данные в более компактный бинарный формат
 - Protofuf, так как основан на заранее заданной в `.proto`-файле схему, может кодировать поля небольшими по размеру численными тегами (тесно связано с предыдущим пунктом, но, на мой взгляд, немаловажно уточнить)
 - Сериализация protobuf де-факто является копированием байт, нет необходимости тратить время на парсинг полей, как это происходит с json

Однако, несмотря на все перечисленные плюсы, json все же незаменим в случаях, когда сериализованный объект читается человеком, так как json-сериализация превращает объект в строку, которую удобно читать. 
